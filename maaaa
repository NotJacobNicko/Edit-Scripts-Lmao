local Plr = game:GetService("Players").LocalPlayer
local bossStorage = workspace:FindFirstChild("bossStorage")

local Hand = nil


local function TriggerMode(obj)
	local Lantern = Plr.Backpack:FindFirstChild("Lantern") or Plr.Character:FindFirstChild("Lantern")
	if Plr.Backpack:FindFirstChild("Lantern") then
		Lantern.Parent = Plr.Character
	end
	for i,obj in pairs(Lantern:GetDescendants()) do
		if obj:IsA("BasePart") then
			obj.Size = Vector3.new(5,5,5)
		end
	end
	if Lantern and Lantern:FindFirstChild("Network") then
		Plr.Character:PivotTo(CFrame.new(obj.Position+Vector3.new(0,3,0))*CFrame.fromEulerAnglesXYZ(-math.rad(90),0,0))
		Lantern:Activate()
		Lantern.Network:FireServer("Hit",obj)
	end
end
local function DieLol(Targeted)
	for i,obj in pairs(workspace:GetDescendants()) do
		if obj:IsA("BasePart") then
			obj.CanTouch = false
			TriggerMode(obj)
		end
	end
end
local Debounce,TPdebounce = false,false
local Position = Plr.Character:FindFirstChild("HumanoidRootPart").Position
game:GetService("RunService").Heartbeat:Connect(function()
	if not Hand then
		for i,obj in pairs(bossStorage:GetDescendants()) do
			if obj:IsA("UnionOperation") and obj.Name == "PointerMimic" then
				Hand = obj.Parent
				break
			end
		end
		return
	end
	if Hand then
		if Hand:FindFirstChildWhichIsA("TouchTransmitter") then
			DieLol(Hand)
		elseif bossStorage:FindFirstChild("nail") then
			local nailList = {}
			for i,nail in pairs(bossStorage:GetChildren()) do
				if nail:IsA("Model") and nail.Name == "nail" then
					table.insert(nailList,nail)
				end
			end
			DieLol(nailList[math.random(1,#nailList)])
		else
			if Plr.Character then
				Plr.Character:MoveTo(Position+Vector3.new(math.random(-50,50),math.random(100),math.random(-50,50)))
			end
		end
	end
end)
